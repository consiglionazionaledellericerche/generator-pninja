<?php

use Elastic\Migrations\Facades\Index;
use Elastic\Migrations\MigrationInterface;

final class Create<%- className %>Index implements MigrationInterface
{
    public function up(): void
    {
        Index::create('<%- indexName %>', function ($index, $settings) {
            $index->integer('id');
<%  columns.map(column => { -%>
            $index->keyword('<%- column %>');
<%  })-%>
            $index->text('__fulltext');
            $settings->index([
                'query' => [
                    'default_field' => '__fulltext'
                ]
            ]);
        });
    }

    public function down(): void
    {
        Index::dropIfExists('<%- indexName %>');
    }
}