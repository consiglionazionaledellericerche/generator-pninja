<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
<% relationsType.forEach(function(rel) { %>use Illuminate\Database\Eloquent\Relations\<%- rel %>;
<% }); %>
use Laravel\Scout\Searchable;
<% if (hasBlobs) { -%>
use App\Casts\Base64BinaryCast;
<% }; -%>
<% enums.forEach(function(enm) { %>use App\Enums\<%- enm %>;
<% }); %>
class <%- className %> extends Model
{
    use HasFactory;
    use Searchable;

    protected $table = '<%- tableName %>';
<%  if(hidden) {-%>
    protected $hidden = [<%- hidden %>];
<%  }-%>
<%  if((castsClasses && castsClasses.length) || (casts && casts.length)) {-%>
    protected $casts = [
<%      castsClasses.forEach(function(cast) { -%>
<%          cast.attrsName.forEach(function(attrName) { -%>
        '<%- attrName %>' => <%- cast.className %>::class,
<%          }); -%>
<%      }); -%>
<%      casts.forEach(function(cast) { -%>
<%          cast.attrsName.forEach(function(attrName) { -%>
        '<%- attrName %>' => '<%- cast.cast %>',
<%          }); -%>
<%      }); -%>
    ];
<%  }-%>
<%  if (fillable) { -%>
    protected $fillable = [
        <%- fillable %>
    ];
<%  }-%>
<%  if (toSearchableArray && toSearchableArray.length > 0) { -%>
    public function toSearchableArray()
    {
        return [
<%    toSearchableArray.map(prop => { -%>
            '<%- prop %>' => $this-><%- prop %>,
<%    })-%>
        ];
    }
<%  }-%>
<%  if (relations) { -%>
    <%- relations -%>
<%  }-%>
}