<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;

class ReindexRequest extends FormRequest
{
    public static array $indexableEntities = [
        'ac-rule' => \App\Models\AcRule::class,
<% entities.forEach(function(entity) { -%>
        '<%= to.slug(entity.name) %>' => \App\Models\<%= entity.name %>::class,
<% }); -%>
    ];

    public function rules(): array
    {
        return [];
    }

    public function authorize(): bool
    {
        $entity = $this->route('entity');
        return array_key_exists($entity, self::$indexableEntities);
    }

    public function modelClass(): string
    {
        return self::$indexableEntities[$this->route('entity')];
    }
}