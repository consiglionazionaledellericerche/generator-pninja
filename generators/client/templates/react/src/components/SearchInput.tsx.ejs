import { useState } from 'react';
import { SearchField, Input, Button } from 'react-aria-components';
import './SearchInput.css';
import { useTranslation } from 'react-i18next';
import { Icon } from './Icon';

interface ISearchInput {
  onChange: (value: string) => void;
  onClear: () => void;
}

const SearchInput: React.FC<ISearchInput> = ({ onChange, onClear }) => {
  const [searchTerm, setSearchTerm] = useState('');
  const { t } = useTranslation();
  return (
    <SearchField className="grid grid-cols-1 w-full" aria-label={t('common.search')}>
      <div className="cursor-pointer col-start-1 row-start-1 ms-2 self-center justify-self-start size-5 relative">
        <Icon icon="search" size={5} className="block" />
      </div>
      <Input
        placeholder={t('common.search')}
        className="scheme-light dark:scheme-dark outline-0 focus:outline-0 focus:ring-2 focus:ring-blue-600 focus:dark:ring-sky-300 rounded-md block w-full border-none bg-slate-200 text-slate-800 dark:bg-slate-600 dark:text-slate-200 placeholder-slate-600 dark:placeholder-slate-300 text-sm/6 py-1.5 px-10 col-start-1 row-start-1"
        onChange={(e) => {
          setSearchTerm(e.target.value);
          onChange(e.target.value);
        }}
        value={searchTerm}
      />
      {searchTerm && (
        <Button
          type="button"
          onClick={() => {
            if (searchTerm) {
              setSearchTerm('');
              onClear();
            }
          }}
          className="cursor-pointer col-start-1 row-start-1 me-4 self-center justify-self-end size-5"
        >
          <Icon icon="close" size={5} className="block" />
        </Button>
      )}
    </SearchField>
  );
};

export { SearchInput };
