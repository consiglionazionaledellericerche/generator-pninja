<%
const convertFieldType = ({type}, enums) => {
    const typeMap = {
        'String': 'string',
        'Integer': 'number',
        'Long': 'number',
        'BigDecimal': 'number',
        'Float': 'number',
        'Double': 'number',
        'Boolean': 'boolean',
        'LocalDate': 'string',
        'ZonedDateTime': 'string',
        'Instant': 'string',
        'LocalTime': 'string',
        'Duration': 'number',
        'TextBlob': 'string',
        'Blob': 'Blob',
        'AnyBlob': 'Blob',
        'ImageBlob': 'ImageBlob'
    };

    const enm = enums.reduce((res, e) => {
        if (e.name === type) {
            return 'keyof typeof ' + type;
        }
        return res;
    }, undefined);

    return typeMap[type] || enm || 'string';
}
const isRequired = (prop) => {
    for (validation of prop.validations) {
        if (validation.key === "required") return true;
    }
    return false;
}
-%>
<% if(entity.body.map(prop =>convertFieldType(prop, enums)).includes('dayjs.Dayjs')) {%>
import dayjs from 'dayjs';
<%}-%>
<%relatedEntities
    .map(r => r.related)
    .filter(r => r !== entity.name)
    .reduce((acc, current) => acc.includes(current) ? acc : [...acc, current], [])
    .forEach(e => {%>import { I<%=e%> } from './<%= to.slug(e) %>.model';
<%});-%>
<% for (prop of entity.body) {
    if ((enums.map(e => e.name)).includes(prop.type)) {%>import { <%= prop.type %> } from './enumerations/<%= to.slug(prop.type); %>.model';
<%}}-%>
export interface I<%= entity.name %> {
  id?: number;
<%  for (prop of entity.body) {-%>
<%    if (!['Blob', 'AnyBlob', 'ImageBlob'].includes(convertFieldType(prop, enums))) {-%>
  <%= to.snake(prop.name) %>?: <%= convertFieldType(prop, enums) %><%= !isRequired(prop) ? ' | null;' : ';'%>
<%    } else {-%>
  <%= to.snake(prop.name) %>_type?: string<%= !isRequired(prop) ? ' | null;' : ';'%>
  <%= to.snake(prop.name) %>_name?: string<%= !isRequired(prop) ? ' | null;' : ';'%>
<%    }-%>
<%  }-%>
<%  foreignIds.forEach(({foreignId, nullable}) => {-%>
  <%= foreignId %>?: number<%= nullable ? ' | null' : '' %>;
<%  })-%>
<%  relatedEntities.forEach(({field, related, isArray}) => {-%>
  <%= field %>?: I<%= related %><%= isArray ? '[]' : '' %> | null;
<%  })-%>
}

export const defaultValue: Readonly<I<%= entity.name %>> = {
<%  for (prop of entity.body) {-%>
<%    if (!['Blob', 'AnyBlob', 'ImageBlob'].includes(convertFieldType(prop, enums))) {-%>
  <%= to.snake(prop.name) %>: undefined,
<%    } else {-%>
  <%= to.snake(prop.name) %>_type: undefined,
  <%= to.snake(prop.name) %>_name: undefined,
<%    }-%>
<%  }-%>
<%  foreignIds.forEach(({foreignId, nullable}) => {-%>
  <%= foreignId %>: undefined,
<%  })-%>
<%  relatedEntities.forEach(({field, related, isArray}) => {-%>
  <%= field %>: undefined,
<%  })-%>
};
